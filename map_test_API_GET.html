
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>An Application</title>

<!-- arc stuff. dependencies -->
	<link rel="stylesheet" type="text/css" href="https://js.arcgis.com/calcite-components/2.13.2/calcite.css" />
	<link rel="stylesheet" href="https://js.arcgis.com/4.31/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.31/"></script>
    
<!-- custom styles / page layout -->
<style>
      html,
      body {}


/* Primary Layouts */	  
	.page_div {
		position:relative;
		margin-left:auto;
		margin-right:auto;
		width:99%; height:98%;
	  }

</style>



<script>

// Parameters:
// datapump stream api
const api_url = "https://connect.calamp.com/connect/datapump/services/events"

// token
const token_url = "https://accounts.calamp.com/oauth2/aus190umwbX0NIZv65d6/v1/token" 	// from https://developer.calamp.com/calamp/reference/getevents_eventresource_get
const token_client_id = "0oa63qnii6kCc10Ze5d7" 											// questionable value? (see token documentation above)

// app_key
const app_key = "6a7a01bd-ac77-406a-91df-f21eb837ff7f" 									// from CalAmp (private email).

// API & API documentation... (CalAmp Developer Portal, 'Private' section for Docs)
const username = "api.datkins"
const password = "UGl0JyYdAg"





function doStuff(){
	document.getElementById('content').innerHTML += "Hello, again."
	
	fetch(token_url, {
		method: "POST",
		headers: {
			grant_type: 'password',
			username: username,
			password: password, 
			client_id: app_key,
			scope: 'openid',
		}
	})
	.then(response => {
		if (!response.ok){
			document.getElementById('content').innerHTML += "... response failed. <br>"
		}
		return response.json();
	})
	.then(data => document.getElementById('content').innerHTML += "... response successful. <br>")
	
	
	
	
}



</script>
</head>

<body>
<!-- viewport container -->
<div class="page_div" id="page_div">

Hello World. &nbsp;&nbsp; <button onclick="doStuff()">Do Stuff</button><br><br>
	
	<div id='content'>
	
	
	</div>

	

  
</div> <!-- end pageDiv --> 



</body>
</html>
